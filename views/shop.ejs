<%- include('./partials/header') %>

    <% if (typeof success !=='undefined' && success && success.length> 0) { %>
        <div id="flash-message"
            class="absolute top-24 left-1/2 -translate-x-1/2 p-3 rounded-md bg-darkText z-50 animate-fade-in-down shadow-xl">
            <span class="inline-block text-white font-medium text-sm tracking-wide">
                <%= success %>
            </span>
        </div>
        <% } %>

            <!-- Hero Carousel Section -->
            <div class="relative w-full h-[500px] md:h-[550px] mb-12 overflow-hidden group bg-[#f8f9fa]">
                <!-- Carousel Container -->
                <div id="hero-carousel" class="w-full h-full relative">
                    <!-- Slide 1: Premium Fashion (Flex-Inspired Layout) -->
                    <div
                        class="carousel-slide absolute top-0 left-0 w-full h-full bg-[#f8f9fa] flex items-center justify-center transition-opacity duration-700 opacity-100 z-10 overflow-hidden">

                        <div
                            class="container mx-auto px-6 md:px-12 flex flex-col md:flex-row items-center justify-between h-full relative z-10">
                            <!-- Left: Typography -->
                            <div
                                class="w-full md:w-1/2 flex flex-col items-start justify-center text-left space-y-6 pt-10 md:pt-0">
                                <div class="flex items-center gap-2 text-xs font-bold tracking-widest text-[#18181B]/60 uppercase animate-fade-in-up"
                                    style="animation-delay: 100ms;">
                                    <span>Premium Collection 2024</span>
                                    <i class="ri-arrow-right-line"></i>
                                </div>

                                <h1 class="text-4xl md:text-6xl font-serif text-[#18181B] leading-[1.1] animate-fade-in-up"
                                    style="animation-delay: 300ms;">
                                    Elevate Your <span class="italic text-[#B88E2F]">Style</span> & <br>
                                    Personal <span class="italic text-[#B88E2F]">Wardrobe</span> in <br>
                                    One Smart Platform
                                </h1>

                                <p class="text-zinc-500 max-w-md text-sm md:text-base leading-relaxed animate-fade-in-up"
                                    style="animation-delay: 500ms;">
                                    From casual wear to formal attire, Scatch keeps your personal style in sync. One
                                    store, infinite possibilities, built to simplify your fashion choices.
                                </p>

                                <div class="flex items-center gap-4 mt-4 animate-fade-in-up"
                                    style="animation-delay: 700ms;">
                                    <a href="#product-list"
                                        class="bg-[#18181B] text-white px-8 py-4 rounded-lg font-bold text-sm hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1">
                                        Shop Collection
                                    </a>
                                    <a href="/about"
                                        class="flex items-center gap-2 text-[#18181B] font-bold text-sm group">
                                        Join Elite Early <i
                                            class="ri-arrow-right-line group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>

                            <!-- Right: 3D Visuals (Cards) -->
                            <div
                                class="hidden md:flex w-1/2 h-full items-center justify-center relative perspective-1000">
                                <!-- Decorative Background Blur -->
                                <div
                                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-[#B88E2F]/10 rounded-full blur-3xl -z-10">
                                </div>

                                <!-- Card 1 (Back) -->
                                <div
                                    class="absolute right-0 top-1/2 -translate-y-1/2 w-72 h-44 bg-gradient-to-br from-zinc-100 to-zinc-200 rounded-2xl shadow-xl transform rotate-12 translate-x-10 translate-y-10 border border-white/50 flex flex-col justify-between p-6 opacity-80 scale-90">
                                    <div class="flex justify-between items-start">
                                        <div class="w-10 h-6 bg-zinc-300 rounded-md"></div>
                                        <span
                                            class="text-xs font-bold text-zinc-400 rotate-90 origin-top-right">CASUAL</span>
                                    </div>
                                    <div class="text-zinc-300 font-mono text-sm">•••• •••• •••• 4289</div>
                                </div>

                                <!-- Card 2 (Front) -->
                                <div
                                    class="absolute right-12 top-1/2 -translate-y-1/2 w-80 h-48 bg-[#18181B] rounded-2xl shadow-2xl transform -rotate-6 transition-transform duration-700 hover:rotate-0 hover:scale-105 border border-white/10 flex flex-col justify-between p-6 z-20 overflow-hidden group">
                                    <div
                                        class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none">
                                    </div>
                                    <div
                                        class="absolute -right-10 -bottom-10 w-40 h-40 bg-[#B88E2F]/20 rounded-full blur-2xl">
                                    </div>

                                    <div class="flex justify-between items-start relative z-10">
                                        <div class="flex flex-col">
                                            <span class="text-white/80 text-xs font-medium tracking-wider">Scatch
                                                Mem.</span>
                                            <span class="text-white font-bold text-lg">$400.00</span>
                                        </div>
                                        <i class="ri-vip-diamond-line text-2xl text-[#B88E2F]"></i>
                                    </div>

                                    <div class="flex justify-between items-end relative z-10">
                                        <div class="text-white/90 font-mono tracking-widest text-sm">Welcome to
                                            Country<br>
                                            of Elite.
                                        </div>
                                        <div
                                            class="bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-[10px] text-white font-bold border border-white/10">
                                            Premium</div>
                                    </div>
                                </div>

                                <!-- Floating Glass Element 1 -->
                                <div
                                    class="absolute top-20 right-40 bg-white/60 backdrop-blur-md border border-white/50 p-3 rounded-xl shadow-lg transform -rotate-3 z-30 animate-float">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="w-8 h-8 rounded-full bg-zinc-100 flex items-center justify-center text-darkText">
                                            <i class="ri-t-shirt-line"></i>
                                        </div>
                                        <div>
                                            <p class="text-[10px] text-zinc-500 font-bold uppercase">New Arrival</p>
                                            <p class="text-xs font-bold text-darkText">Summer Kit</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Floating Glass Element 2 -->
                                <div class="absolute bottom-20 right-10 bg-white/60 backdrop-blur-md border border-white/50 p-3 rounded-xl shadow-lg transform rotate-3 z-30 animate-float"
                                    style="animation-delay: 1s;">
                                    <div class="flex items-center gap-3">
                                        <div
                                            class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-700">
                                            <i class="ri-star-fill"></i>
                                        </div>
                                        <div>
                                            <p class="text-[10px] text-zinc-500 font-bold uppercase">Rating</p>
                                            <p class="text-xs font-bold text-darkText">4.9/5.0</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Gradient for mobile text readability if needed -->
                        <div
                            class="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent md:hidden pointer-events-none">
                        </div>
                    </div>

                    <!-- Slide 2: Winter Series (Blue Theme - Reversed Layout) -->
                    <div
                        class="carousel-slide absolute top-0 left-0 w-full h-full bg-[#f0f4f8] flex items-center justify-center transition-opacity duration-700 opacity-0 z-0 overflow-hidden">
                        <div
                            class="container mx-auto px-6 md:px-12 flex flex-col md:flex-row-reverse items-center justify-between h-full relative z-10">

                            <!-- Right: Text (Reversed) -->
                            <div
                                class="w-full md:w-1/2 flex flex-col items-end justify-center text-right space-y-6 pt-10 md:pt-0">
                                <div
                                    class="flex items-center gap-2 text-xs font-bold tracking-widest text-slate-500 uppercase">
                                    <i class="ri-asterisk"></i>
                                    <span>Winter Series 2024</span>
                                </div>
                                <h1 class="text-4xl md:text-6xl font-serif text-slate-800 leading-[1.1]">
                                    Refined <span class="italic text-blue-600">Comfort</span> & <br>
                                    Timeless <span class="italic text-blue-600">Detailed</span> <br>
                                    Essentials
                                </h1>
                                <p class="text-slate-500 max-w-md text-sm md:text-base leading-relaxed">
                                    Crafted for the cold, designed for the bold. Experience the softness of premium
                                    cotton blends in our latest winter drop.
                                </p>
                                <div class="flex items-center gap-4 mt-4">
                                    <a href="/shop?category=Winter"
                                        class="flex items-center gap-2 text-slate-800 font-bold text-sm group hover:ml-2 transition-all">
                                        View Lookbook <i class="ri-arrow-right-line"></i>
                                    </a>
                                    <a href="#product-list"
                                        class="bg-slate-800 text-white px-8 py-4 rounded-lg font-bold text-sm hover:bg-slate-900 transition-all shadow-lg hover:shadow-xl hover:-translate-y-1">
                                        Shop Winter
                                    </a>
                                </div>
                            </div>

                            <!-- Left: Visuals (Reversed) -->
                            <div
                                class="hidden md:flex w-1/2 h-full items-center justify-center relative perspective-1000">
                                <div
                                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-blue-100 rounded-full blur-3xl -z-10">
                                </div>

                                <!-- Floating Composition -->
                                <div class="relative w-80 h-80 z-10">
                                    <!-- Back Card -->
                                    <div
                                        class="absolute inset-0 bg-white shadow-xl rounded-3xl transform -rotate-12 scale-90 opacity-60 border border-slate-100">
                                    </div>

                                    <!-- Middle Card -->
                                    <div
                                        class="absolute inset-0 bg-slate-50 shadow-xl rounded-3xl transform -rotate-6 scale-95 opacity-80 border border-slate-200 flex items-center justify-center">
                                        <div
                                            class="w-full h-full p-4 border-2 border-dashed border-slate-200 rounded-3xl">
                                        </div>
                                    </div>

                                    <!-- Front Main Card -->
                                    <div
                                        class="absolute inset-0 bg-white shadow-2xl rounded-3xl transform rotate-0 hover:rotate-2 transition-transform duration-500 border border-white overflow-hidden p-6 flex flex-col justify-between group">
                                        <div class="flex justify-between w-full">
                                            <div
                                                class="w-8 h-8 bg-blue-50 rounded-full flex items-center justify-center text-blue-600">
                                                <i class="ri-snowflake-line"></i>
                                            </div>
                                            <span class="text-xs font-bold text-slate-400">02/05</span>
                                        </div>
                                        <div class="space-y-2">
                                            <div id="winter-shuffle-container"
                                                class="h-24 w-full bg-slate-100 rounded-xl relative overflow-hidden">
                                                <img src="/images/uploads/winter_jacket.png"
                                                    class="shuffle-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-100"
                                                    alt="Winter Jacket">
                                                <img src="/images/uploads/1bag.png"
                                                    class="shuffle-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-0"
                                                    alt="Bag 1">
                                                <img src="/images/uploads/2bag.png"
                                                    class="shuffle-image absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-0"
                                                    alt="Bag 2">
                                            </div>
                                            <script>
                                                document.addEventListener('DOMContentLoaded', () => {
                                                    const images = document.querySelectorAll('#winter-shuffle-container .shuffle-image');
                                                    let idx = 0;
                                                    if (images.length > 0) {
                                                        setInterval(() => {
                                                            images[idx].classList.replace('opacity-100', 'opacity-0');
                                                            idx = (idx + 1) % images.length;
                                                            images[idx].classList.replace('opacity-0', 'opacity-100');
                                                        }, 2000);
                                                    }
                                                });
                                            </script>
                                            <h3 class="font-bold text-slate-800">Wool Blend Jacket</h3>
                                            <p class="text-xs text-slate-500">Premium warmth.</p>
                                        </div>
                                        <div
                                            class="w-full bg-slate-900 text-white text-center py-2 rounded-lg text-xs font-bold">
                                            Add to Wishlist</div>
                                    </div>

                                    <!-- Floating Tag -->
                                    <div
                                        class="absolute -top-6 -right-10 bg-white/80 backdrop-blur-md px-4 py-2 rounded-lg shadow-lg rotate-12 animate-float">
                                        <span class="text-xs font-bold text-blue-600">100% Cashmere</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 3: New Arrivals (Warm Theme - Center/Fan Layout) -->
                    <div
                        class="carousel-slide absolute top-0 left-0 w-full h-full bg-gradient-to-br from-[#FFF8E7] to-[#FFE4C4] flex items-center justify-center transition-opacity duration-700 opacity-0 z-0 overflow-hidden">
                        <div
                            class="container mx-auto px-6 md:px-12 flex flex-col items-center justify-center h-full relative z-10 text-center">

                            <!-- Center Content -->
                            <div class="relative z-20 mb-8 mt-12 md:mt-0">
                                <span
                                    class="inline-block px-3 py-1 rounded-full bg-orange-100 text-orange-700 text-[10px] font-bold tracking-widest uppercase mb-4 animate-fade-in-up">Just
                                    Dropped</span>
                                <h1 class="text-5xl md:text-7xl font-serif text-stone-800 leading-tight mb-6 animate-fade-in-up"
                                    style="animation-delay: 150ms;">
                                    Pure <span class="italic text-orange-600">Natural</span> <br>
                                    Aesthetics
                                </h1>
                                <a href="#product-list"
                                    class="inline-flex items-center gap-2 border-b border-stone-800 pb-1 text-stone-800 font-bold hover:text-orange-600 hover:border-orange-600 transition-colors animate-fade-in-up"
                                    style="animation-delay: 300ms;">
                                    Explore New Arrivals
                                </a>
                            </div>

                            <!-- Bottom Floating Visuals (Desktop Only) -->
                            <div
                                class="hidden md:flex items-end justify-center gap-6 absolute bottom-0 left-0 w-full h-1/2 pointer-events-none perspective-1000">

                                <!-- Left Side Blur Element -->
                                <div
                                    class="absolute left-10 bottom-20 w-48 p-4 bg-white/30 backdrop-blur-md border border-white/40 rounded-xl shadow-lg transform -rotate-6 animate-float z-20">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-600">
                                            <i class="ri-leaf-line"></i>
                                        </div>
                                        <span
                                            class="text-xs font-bold text-stone-800 uppercase tracking-widest">Natural</span>
                                    </div>
                                    <p class="text-[10px] text-stone-600 font-medium leading-relaxed">
                                        100% organic materials sourced responsibly for maximum comfort.
                                    </p>
                                </div>

                                <!-- Card Far Left (New Faded) -->
                                <div
                                    class="w-40 h-56 bg-white/40 backdrop-blur-sm shadow-lg rounded-t-2xl transform translate-y-16 rotate-[-15deg] border border-stone-100/50 p-4 opacity-70 overflow-hidden">
                                    <img src="/images/uploads/4bag.png"
                                        class="w-full h-28 object-contain mb-4 rounded-lg mix-blend-multiply opacity-80"
                                        alt="Bag">
                                    <div class="h-2 w-2/3 bg-stone-200/50 rounded mb-2"></div>
                                </div>

                                <!-- Card 1 -->
                                <div
                                    class="w-48 h-64 bg-white shadow-xl rounded-t-2xl transform translate-y-10 rotate-[-10deg] border border-stone-100 p-4 opacity-90 hover:opacity-100 hover:translate-y-0 transition-all duration-500 overflow-hidden">
                                    <img src="/images/uploads/1bag.png"
                                        class="w-full h-32 object-contain mb-4 hover:scale-110 transition-transform duration-500"
                                        alt="Summer Bag">
                                    <div class="h-2 w-2/3 bg-stone-200 rounded mb-2"></div>
                                    <div class="h-2 w-1/2 bg-stone-100 rounded"></div>
                                </div>

                                <!-- Card 2 (Center - WHITE BAG) -->
                                <div
                                    class="w-56 h-72 bg-white shadow-2xl rounded-t-2xl transform translate-y-0 rotate-0 border border-stone-200 p-5 z-10 overflow-hidden">
                                    <div
                                        class="w-full h-40 bg-orange-50 rounded-lg mb-4 flex items-center justify-center text-orange-300 relative overflow-hidden group">
                                        <!-- Using 3bag 1.png which appears to be the white tote -->
                                        <img src="/images/uploads/3bag 1.png"
                                            class="w-full h-full object-contain p-2 group-hover:scale-110 transition-transform duration-700"
                                            alt="Summer Linen">
                                    </div>
                                    <h3 class="font-bold text-stone-800">Summer Linen</h3>
                                    <p class="text-xs text-stone-500 mt-1">Breathable fabric.</p>
                                </div>

                                <!-- Card 3 -->
                                <div
                                    class="w-48 h-64 bg-white shadow-xl rounded-t-2xl transform translate-y-10 rotate-[10deg] border border-stone-100 p-4 opacity-90 hover:opacity-100 hover:translate-y-0 transition-all duration-500 overflow-hidden">
                                    <!-- Moved Black Bag (2bag.png) here or just use 5bag.png -->
                                    <img src="/images/uploads/2bag.png"
                                        class="w-full h-32 object-contain mb-4 hover:scale-110 transition-transform duration-500"
                                        alt="Accessory">
                                    <div class="h-2 w-2/3 bg-stone-200 rounded mb-2"></div>
                                    <div class="h-2 w-1/2 bg-stone-100 rounded"></div>
                                </div>

                                <!-- Card Far Right (New Faded) -->
                                <div
                                    class="w-40 h-56 bg-white/40 backdrop-blur-sm shadow-lg rounded-t-2xl transform translate-y-16 rotate-[15deg] border border-stone-100/50 p-4 opacity-70 overflow-hidden">
                                    <img src="/images/uploads/5bag.png"
                                        class="w-full h-28 object-contain mb-4 rounded-lg mix-blend-multiply opacity-80"
                                        alt="Bag">
                                    <div class="h-2 w-2/3 bg-stone-200/50 rounded mb-2"></div>
                                </div>

                                <!-- Right Side Blur Element -->
                                <div class="absolute right-10 bottom-24 w-48 p-4 bg-white/30 backdrop-blur-md border border-white/40 rounded-xl shadow-lg transform rotate-3 animate-float z-20"
                                    style="animation-delay: 1.5s;">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-600">
                                            <i class="ri-t-shirt-air-line"></i>
                                        </div>
                                        <span
                                            class="text-xs font-bold text-stone-800 uppercase tracking-widest">Breathable</span>
                                    </div>
                                    <p class="text-[10px] text-stone-600 font-medium leading-relaxed">
                                        Designed for airflow and keeping you cool during summer days.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <button id="prevBtn"
                    class="absolute top-1/2 left-5 -translate-y-1/2 w-12 h-12 rounded-full bg-white/50 backdrop-blur-sm border border-white/60 flex items-center justify-center hover:bg-white hover:scale-110 transition-all z-20 cursor-pointer shadow-sm group-hover:opacity-100 opacity-0 duration-300">
                    <i class="ri-arrow-left-s-line text-xl text-darkText"></i>
                </button>
                <button id="nextBtn"
                    class="absolute top-1/2 right-5 -translate-y-1/2 w-12 h-12 rounded-full bg-white/50 backdrop-blur-sm border border-white/60 flex items-center justify-center hover:bg-white hover:scale-110 transition-all z-20 cursor-pointer shadow-sm group-hover:opacity-100 opacity-0 duration-300">
                    <i class="ri-arrow-right-s-line text-xl text-darkText"></i>
                </button>
            </div>

            <!-- Category Icons Section -->
            <div class="relative w-full mb-12 group/cat">
                <!-- Icons Container -->
                <div id="category-container"
                    class="w-full flex justify-start md:justify-center items-center gap-8 md:gap-16 overflow-x-auto px-12 py-4 scrollbar-hide scroll-smooth">
                    <a href="/category/T-Shirt" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-t-shirt-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">T-Shirt</span>
                    </a>
                    <a href="/category/Shirt" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-shirt-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">Shirt</span>
                    </a>
                    <a href="/category/Women" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-women-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">Women</span>
                    </a>
                    <a href="/category/Bags" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-handbag-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">Bags</span>
                    </a>
                    <a href="/category/Shoes" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-footprint-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">Shoes</span>
                    </a>
                    <a href="/category/Watches" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-time-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">Watches</span>
                    </a>
                    <a href="/shop" class="flex flex-col items-center gap-2 group min-w-[60px]">
                        <div
                            class="w-12 h-12 md:w-16 md:h-16 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-600 group-hover:bg-darkText group-hover:text-white transition-all shadow-sm">
                            <i class="ri-apps-line text-lg md:text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-zinc-600 group-hover:text-darkText">All</span>
                    </a>
                </div>
            </div>

            <!-- Script moved to ensure elements exist -->
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const slides = document.querySelectorAll('.carousel-slide');
                    const prevBtn = document.getElementById('prevBtn');
                    const nextBtn = document.getElementById('nextBtn');
                    const carousel = document.getElementById('hero-carousel');

                    let currentSlide = 0;
                    let autoPlayInterval;

                    if (slides.length > 0) {
                        function showSlide(index) {
                            slides.forEach((slide, i) => {
                                if (i === index) {
                                    slide.classList.remove('opacity-0', 'z-0');
                                    slide.classList.add('opacity-100', 'z-10');
                                    // Reset animations
                                    const textElements = slide.querySelectorAll('.animate-fade-in-up');
                                    textElements.forEach(el => {
                                        el.style.animation = 'none';
                                        el.offsetHeight;
                                        el.style.animation = null;
                                    });
                                } else {
                                    slide.classList.remove('opacity-100', 'z-10');
                                    slide.classList.add('opacity-0', 'z-0');
                                }
                            });
                        }

                        function nextSlide() {
                            currentSlide = (currentSlide + 1) % slides.length;
                            showSlide(currentSlide);
                        }

                        function prevSlide() {
                            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                            showSlide(currentSlide);
                        }

                        if (nextBtn) nextBtn.addEventListener('click', () => {
                            nextSlide();
                            resetTimer();
                        });

                        if (prevBtn) prevBtn.addEventListener('click', () => {
                            prevSlide();
                            resetTimer();
                        });

                        function startTimer() {
                            if (autoPlayInterval) clearInterval(autoPlayInterval);
                            autoPlayInterval = setInterval(nextSlide, 3000);
                        }

                        function stopTimer() {
                            if (autoPlayInterval) clearInterval(autoPlayInterval);
                        }

                        function resetTimer() {
                            stopTimer();
                            startTimer();
                        }

                        // Pause on hover
                        if (carousel) {
                            carousel.addEventListener('mouseenter', stopTimer);
                            carousel.addEventListener('mouseleave', startTimer);
                        }

                        // Start initial timer
                        startTimer();
                    }
                });
            </script>

            <style>
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }

                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .animate-fade-in-up {
                    animation: fadeInUp 0.8s ease-out forwards;
                }

                @keyframes float {

                    0%,
                    100% {
                        transform: translateY(0) rotate(var(--tw-rotate));
                    }

                    50% {
                        transform: translateY(-10px) rotate(var(--tw-rotate));
                    }
                }

                .animate-float {
                    animation: float 4s ease-in-out infinite;
                }
            </style>

            <!-- Filter Toggles (Mobile & Desktop) -->
            <div class="w-full px-2 md:px-4 mb-6 flex items-center justify-between">
                <!-- Mobile Toggle -->
                <button onclick="toggleFilter()"
                    class="md:hidden flex items-center gap-2 px-4 py-2 bg-zinc-100 rounded-full text-sm font-medium text-darkText shadow-sm border border-zinc-200">
                    <i class="ri-equalizer-line"></i> Filter
                </button>

                <!-- Desktop Toggle (New) -->
                <button onclick="toggleFilter()"
                    class="hidden md:flex items-center gap-2 px-5 py-2.5 bg-[#18181B] text-white rounded-lg text-sm font-bold shadow-md hover:bg-[#18181B]/90 transition-all">
                    <i class="ri-equalizer-line"></i> Show Filters & Sort
                </button>
            </div>

            <div class="w-full min-h-screen flex flex-col md:flex-row items-start px-2 md:px-4 pb-20 gap-6">
                <!-- Minimalist Sidebar (Hidden by default on Desktop too) -->
                <div id="filter-sidebar"
                    class="hidden w-full md:w-64 flex-shrink-0 sticky top-28 bg-white z-40 transition-all duration-300">
                    <!-- Filter Groups -->
                    <form action="/shop" method="GET">
                        <!-- Sort By -->
                        <div class="mb-8">
                            <h3 class="text-xs font-bold text-darkText uppercase tracking-widest mb-4">Sort By</h3>
                            <div class="relative">
                                <select name="sortby" onchange="this.form.submit()"
                                    class="w-full appearance-none bg-white border border-zinc-200 text-zinc-700 text-sm py-3 px-4 rounded-lg focus:outline-none focus:border-darkText cursor-pointer">
                                    <option value="popular">Popular</option>
                                    <option value="newest">Newest</option>
                                    <option value="price_low">Price: Low to High</option>
                                    <option value="price_high">Price: High to Low</option>
                                </select>
                                <div
                                    class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-zinc-500">
                                    <i class="ri-arrow-down-s-line"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Price Range -->
                        <div class="mb-8">
                            <h3
                                class="text-xs font-bold text-darkText uppercase tracking-widest mb-4 border-b border-zinc-100 pb-2">
                                Price</h3>
                            <div class="flex items-center gap-2">
                                <input type="number" name="min_price" placeholder="Min"
                                    class="w-full bg-zinc-50 border border-zinc-200 rounded-lg py-2 px-3 text-sm focus:outline-none focus:border-darkText">
                                <span class="text-zinc-400">-</span>
                                <input type="number" name="max_price" placeholder="Max"
                                    class="w-full bg-zinc-50 border border-zinc-200 rounded-lg py-2 px-3 text-sm focus:outline-none focus:border-darkText">
                            </div>
                        </div>

                        <!-- Brand -->
                        <div class="mb-8">
                            <h3
                                class="text-xs font-bold text-darkText uppercase tracking-widest mb-4 border-b border-zinc-100 pb-2">
                                Brand</h3>
                            <div class="space-y-2">
                                <label class="flex items-center gap-2 cursor-pointer group">
                                    <input type="checkbox" name="brand" value="Nike"
                                        class="w-4 h-4 rounded border-zinc-300 text-darkText focus:ring-darkText">
                                    <span class="text-sm text-zinc-600 group-hover:text-darkText">Nike</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer group">
                                    <input type="checkbox" name="brand" value="Adidas"
                                        class="w-4 h-4 rounded border-zinc-300 text-darkText focus:ring-darkText">
                                    <span class="text-sm text-zinc-600 group-hover:text-darkText">Adidas</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer group">
                                    <input type="checkbox" name="brand" value="Puma"
                                        class="w-4 h-4 rounded border-zinc-300 text-darkText focus:ring-darkText">
                                    <span class="text-sm text-zinc-600 group-hover:text-darkText">Puma</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer group">
                                    <input type="checkbox" name="brand" value="Zara"
                                        class="w-4 h-4 rounded border-zinc-300 text-darkText focus:ring-darkText">
                                    <span class="text-sm text-zinc-600 group-hover:text-darkText">Zara</span>
                                </label>
                            </div>
                        </div>

                        <!-- Size -->
                        <div class="mb-8">
                            <h3
                                class="text-xs font-bold text-darkText uppercase tracking-widest mb-4 border-b border-zinc-100 pb-2">
                                Size</h3>
                            <div class="flex flex-wrap gap-2">
                                <label class="cursor-pointer">
                                    <input type="checkbox" name="size" value="S" class="peer sr-only">
                                    <div
                                        class="w-10 h-10 flex items-center justify-center border border-zinc-200 rounded-lg text-sm text-zinc-600 peer-checked:bg-darkText peer-checked:text-white peer-checked:border-darkText hover:border-darkText transition-all">
                                        S</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="checkbox" name="size" value="M" class="peer sr-only">
                                    <div
                                        class="w-10 h-10 flex items-center justify-center border border-zinc-200 rounded-lg text-sm text-zinc-600 peer-checked:bg-darkText peer-checked:text-white peer-checked:border-darkText hover:border-darkText transition-all">
                                        M</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="checkbox" name="size" value="L" class="peer sr-only">
                                    <div
                                        class="w-10 h-10 flex items-center justify-center border border-zinc-200 rounded-lg text-sm text-zinc-600 peer-checked:bg-darkText peer-checked:text-white peer-checked:border-darkText hover:border-darkText transition-all">
                                        L</div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="checkbox" name="size" value="XL" class="peer sr-only">
                                    <div
                                        class="w-10 h-10 flex items-center justify-center border border-zinc-200 rounded-lg text-sm text-zinc-600 peer-checked:bg-darkText peer-checked:text-white peer-checked:border-darkText hover:border-darkText transition-all">
                                        XL</div>
                                </label>
                            </div>
                        </div>

                        <!-- Category -->
                        <div class="mb-8">
                            <h3
                                class="text-xs font-bold text-darkText uppercase tracking-widest mb-4 border-b border-zinc-100 pb-2">
                                Category</h3>
                            <div class="space-y-1">
                                <a href="/shop"
                                    class="flex items-center justify-between text-sm py-1 text-darkText font-medium">
                                    <span>All Products</span>
                                    <span class="text-xs text-zinc-400">120</span>
                                </a>
                                <a href="/shop?category=Clothing"
                                    class="flex items-center justify-between text-sm py-1 text-zinc-500 hover:text-darkText">
                                    <span>Clothing</span>
                                    <span class="text-xs text-zinc-400">85</span>
                                </a>
                                <a href="/shop?category=Accessories"
                                    class="flex items-center justify-between text-sm py-1 text-zinc-500 hover:text-darkText">
                                    <span>Accessories</span>
                                    <span class="text-xs text-zinc-400">35</span>
                                </a>
                                <a href="/shop?sortby=newest"
                                    class="flex items-center justify-between text-sm py-1 text-zinc-500 hover:text-darkText">
                                    <span>New Arrivals</span>
                                    <span class="text-xs text-zinc-400">12</span>
                                </a>
                            </div>
                        </div>

                        <!-- Apply Filter Button (Mobile mainly, but good for Desktop too) -->
                        <button type="submit"
                            class="w-full py-3 bg-darkText text-white text-sm font-bold rounded-xl hover:bg-darkText transition-colors">
                            Apply Filters
                        </button>
                    </form>
                </div>

                <!-- Product Grid (Flexible Width) -->
                <div class="flex-1 w-full min-w-0">

                    <% /* Safely define flashProducts with multiple fallbacks */ var safeFlashDeals=(typeof
                        flashDealsProducts !=='undefined' && flashDealsProducts && flashDealsProducts.length> 0) ?
                        flashDealsProducts : [];

                        var safeFlashSale = (typeof flashSaleProducts !== 'undefined' && flashSaleProducts &&
                        flashSaleProducts.length > 0) ? flashSaleProducts : [];

                        var flashProducts = safeFlashDeals.length > 0 ? safeFlashDeals : safeFlashSale;

                        /* Safely define products array */
                        var safeProducts = (typeof products !== 'undefined' && products && products.length > 0) ?
                        products : [];
                        %>

                        <% if (flashProducts && flashProducts.length> 0) { %>
                            <!-- Flash Sale Section (Ultra-Modern Refined) -->
                            <div class="w-full mb-8 relative">
                                <!-- Background Decoration (Subtle Fade) -->
                                <div
                                    class="absolute inset-0 bg-gradient-to-r from-orange-50/50 to-transparent -z-10 rounded-3xl blur-3xl opacity-50">
                                </div>

                                <div class="w-full">
                                    <!-- Header: Sleek & Modern -->
                                    <div class="flex flex-col md:flex-row items-end justify-between mb-8 px-12">
                                        <div class="flex flex-col gap-2">
                                            <div class="flex items-center gap-3 mb-2">
                                                <div class="w-2 h-2 bg-red-600 rounded-full animate-ping"></div>
                                                <span
                                                    class="text-red-600 font-bold text-xs uppercase tracking-[0.25em] drop-shadow-[0_0_8px_rgba(220,38,38,0.3)]">Live
                                                    Event</span>
                                            </div>
                                            <h2
                                                class="text-4xl md:text-5xl font-serif font-medium text-[#18181B] leading-none">
                                                Flash <span class="italic text-[#B88E2F]">Deals</span>
                                            </h2>
                                        </div>

                                        <!-- Center: Glassy Timer Pill -->
                                        <!-- Center: Glassy Timer Pill -->
                                        <% /* Safely get end time */ var flashEndTime=(typeof owner !=='undefined' &&
                                            owner && owner.flashSale && owner.flashSale.endTime) ?
                                            owner.flashSale.endTime : '' ; %>
                                            <div id="flash-timer-container" data-endtime="<%= flashEndTime %>"
                                                class="mt-6 md:mt-0 bg-[#18181B] text-white rounded-full px-8 py-3 flex items-center gap-6 shadow-2xl shadow-zinc-200">
                                                <span
                                                    class="text-xs font-medium text-zinc-400 uppercase tracking-wider hidden md:block">Ending
                                                    In</span>
                                                <div
                                                    class="flex items-center gap-1 font-mono text-xl md:text-2xl font-bold tracking-widest text-[#F5F5F7]">
                                                    <span id="timer-hours">00</span><span
                                                        class="text-zinc-500">:</span><span
                                                        id="timer-minutes">00</span><span
                                                        class="text-zinc-500">:</span><span id="timer-seconds"
                                                        class="text-[#B88E2F]">00</span>
                                                </div>
                                            </div>

                                            <script>
                                                (function () {
                                                    const container = document.getElementById('flash-timer-container');
                                                    if (!container || !container.dataset.endtime) return;

                                                    const endTime = new Date(container.dataset.endtime).getTime();
                                                    if (isNaN(endTime)) return;

                                                    function updateTimer() {
                                                        const now = new Date().getTime();
                                                        let distance = endTime - now;

                                                        if (distance < 0) {
                                                            distance = 0;
                                                        }

                                                        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                                        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                                                        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                                                        const hoursEl = document.getElementById('timer-hours');
                                                        const minutesEl = document.getElementById('timer-minutes');
                                                        const secondsEl = document.getElementById('timer-seconds');

                                                        if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                                                        if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                                                        if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
                                                    }

                                                    setInterval(updateTimer, 1000);
                                                    updateTimer();
                                                })();
                                            </script>

                                            <!-- Right: Modern Rectangular Controls -->
                                            <div class="hidden md:flex items-center gap-1">
                                                <button id="flash-prev"
                                                    class="w-12 h-10 border border-zinc-200 hover:border-darkText hover:bg-darkText hover:text-white transition-all duration-300 flex items-center justify-center rounded-l-lg group">
                                                    <i
                                                        class="ri-arrow-left-line text-lg group-hover:-translate-x-1 transition-transform"></i>
                                                </button>
                                                <button id="flash-next"
                                                    class="w-12 h-10 border border-l-0 border-zinc-200 hover:border-darkText hover:bg-darkText hover:text-white transition-all duration-300 flex items-center justify-center rounded-r-lg group">
                                                    <i
                                                        class="ri-arrow-right-line text-lg group-hover:translate-x-1 transition-transform"></i>
                                                </button>
                                            </div>
                                    </div>

                                    <!-- Modern Card Grid -->
                                    <div id="flash-sale-container"
                                        class="flex overflow-x-auto gap-6 scroll-smooth snap-x scrollbar-hide pb-8 px-12">
                                        <% flashProducts.forEach(function(item) { %>
                                            <div class="group relative min-w-[260px] md:min-w-[280px] snap-start">

                                                <!-- Card Container -->
                                                <div
                                                    class="bg-white rounded-2xl overflow-hidden shadow-[0_2px_10px_rgba(0,0,0,0.04)] group-hover:shadow-[0_15px_30px_rgba(0,0,0,0.08)] transition-all duration-500 border border-zinc-100/50">

                                                    <!-- Image -->
                                                    <div
                                                        class="h-64 bg-[#F8F9FA] relative flex items-center justify-center overflow-hidden">
                                                        <img src="/images/uploads/<%= item.image %>"
                                                            class="w-4/5 h-4/5 object-contain mix-blend-multiply group-hover:scale-110 transition-transform duration-700 ease-[cubic-bezier(0.25,0.8,0.25,1)]">
                                                    </div>

                                                    <!-- Content -->
                                                    <div class="p-4">
                                                        <div class="flex justify-between items-start mb-1">
                                                            <h3
                                                                class="font-serif text-base text-darkText leading-snug truncate pr-4 group-hover:text-[#DB4444] transition-colors">
                                                                <%= item.name %>
                                                            </h3>
                                                            <p
                                                                class="text-[10px] text-zinc-500 font-medium uppercase tracking-wide">
                                                                <%= item.brand || 'Unknown' %>
                                                            </p>
                                                            <div class="flex flex-col items-end">
                                                                <% if(item.discount> 0) { %>
                                                                    <span class="text-sm font-bold text-darkText">₹<%=
                                                                            item.price - item.discount %></span>
                                                                    <% } else { %>
                                                                        <span class="text-sm font-bold text-darkText">₹
                                                                            <%= item.price %>
                                                                        </span>
                                                                        <% } %>
                                                            </div>
                                                        </div>

                                                        <!-- Rating (Restored) -->
                                                        <div
                                                            class="flex items-center gap-1 text-yellow-500 text-[10px] mb-3">
                                                            <i class="ri-star-fill"></i><i class="ri-star-fill"></i><i
                                                                class="ri-star-fill"></i><i class="ri-star-fill"></i><i
                                                                class="ri-star-fill"></i>
                                                            <span class="text-zinc-400 font-medium ml-1">(4.8)</span>
                                                        </div>

                                                        <!-- Action Row (Compacted) -->
                                                        <div
                                                            class="flex items-center gap-2 pt-3 border-t border-zinc-50">
                                                            <a href="javascript:void(0)"
                                                                onclick="addToCart(event, '<%= item._id %>')"
                                                                class="flex-1 bg-darkText text-white py-2 rounded-lg text-xs font-bold hover:bg-darkText transition-colors flex items-center justify-center gap-2 group/btn uppercase tracking-wider">
                                                                <span>Add to Cart</span>
                                                                <i
                                                                    class="ri-shopping-bag-line group-hover/btn:-translate-y-0.5 transition-transform text-sm"></i>
                                                            </a>
                                                            <% let isWishlisted=(typeof user !=='undefined' && user &&
                                                                user.wishlist) ? user.wishlist.indexOf(item._id) !==-1 :
                                                                false; %>
                                                                <a href="javascript:void(0)"
                                                                    onclick="addToWishlist(event, '<%= item._id %>')"
                                                                    class="w-9 h-9 flex items-center justify-center rounded-lg border border-zinc-200 text-zinc-400 hover:text-[#DB4444] hover:border-[#DB4444] hover:bg-red-50 transition-all <%= isWishlisted ? 'text-[#DB4444] border-[#DB4444]' : '' %>">
                                                                    <i
                                                                        class="<%= isWishlisted ? 'ri-heart-fill' : 'ri-heart-line' %> text-lg"></i>
                                                                </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <!-- 'View More' Indicator Card (Slim) -->
                                                <div
                                                    class="group relative min-w-[140px] md:min-w-[160px] snap-start flex items-center justify-center">
                                                    <a href="/shop"
                                                        class="w-full h-full bg-white rounded-2xl border border-zinc-200 hover:border-[#DB4444] hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col items-center justify-center gap-3 group/more p-4">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-zinc-100 flex items-center justify-center text-darkText group-hover/more:bg-[#DB4444] group-hover/more:text-white transition-colors duration-300">
                                                            <i
                                                                class="ri-arrow-right-line text-xl group-hover/more:translate-x-1 transition-transform"></i>
                                                        </div>
                                                        <span
                                                            class="text-sm font-bold text-darkText group-hover/more:text-[#DB4444] transition-colors text-center leading-tight">View
                                                            All<br>Deals</span>
                                                    </a>
                                                </div>
                                    </div>
                                </div>
                            </div>
                            <% } %>



                                <!-- Friendly Section Divider & Header (Creative) -->
                                <div class="px-12 mb-10 mt-8 relative">
                                    <div class="flex items-center gap-6">
                                        <div
                                            class="h-px bg-gradient-to-r from-transparent via-zinc-300 to-zinc-200 flex-1 opacity-50">
                                        </div>
                                        <div class="relative flex flex-col items-center">
                                            <div
                                                class="absolute -top-6 text-[#DB4444]/10 text-6xl font-serif italic -z-10 select-none transform -rotate-2">
                                                Collections</div>
                                            <h3
                                                class="font-serif text-3xl md:text-4xl text-darkText text-center flex items-center gap-3 relative z-10">
                                                <span class="italic text-zinc-500 font-light">Curated</span>
                                                <span class="font-bold tracking-tight">Collections</span>
                                            </h3>
                                            <div class="flex items-center gap-2 mt-2">
                                                <div class="w-1 h-1 rounded-full bg-[#DB4444]"></div>
                                                <div class="w-12 h-px bg-[#DB4444]/30"></div>
                                                <div class="w-1 h-1 rounded-full bg-[#DB4444]"></div>
                                            </div>
                                        </div>
                                        <div
                                            class="h-px bg-gradient-to-l from-transparent via-zinc-300 to-zinc-200 flex-1 opacity-50">
                                        </div>
                                    </div>
                                    <p class="text-center text-zinc-400 text-sm mt-2 font-medium">Handpicked styles for
                                        every occasion</p>
                                </div>

                                <!-- 6-Card Auto-Slider with Focus Hover Effect -->
                                <style>
                                    .focus-hover-container:hover .promo-card {
                                        transform: scale(0.85);
                                        opacity: 0.5;
                                        filter: blur(2px) grayscale(0.4);
                                    }

                                    .focus-hover-container .promo-card:hover {
                                        transform: scale(1.15) !important;
                                        opacity: 1 !important;
                                        filter: blur(0) grayscale(0) !important;
                                        z-index: 50;
                                        box-shadow: 0 40px 70px -15px rgba(0, 0, 0, 0.4);
                                    }

                                    .promo-card {
                                        transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
                                        min-width: 320px;
                                        flex-shrink: 0;
                                        transform-origin: center center;
                                    }

                                    .no-scrollbar::-webkit-scrollbar {
                                        display: none;
                                    }

                                    .no-scrollbar {
                                        -ms-overflow-style: none;
                                        scrollbar-width: none;
                                    }
                                </style>

                                <div class="w-full mb-20 relative">
                                    <div
                                        class="absolute left-0 top-0 bottom-0 w-20 bg-gradient-to-r from-white to-transparent z-10 pointer-events-none">
                                    </div>
                                    <div
                                        class="absolute right-0 top-0 bottom-0 w-20 bg-gradient-to-l from-white to-transparent z-10 pointer-events-none">
                                    </div>

                                    <div id="promo-card-slider"
                                        class="focus-hover-container flex gap-8 overflow-x-auto no-scrollbar px-12 py-10"
                                        onmouseenter="stopPromoScroll()" onmouseleave="startPromoScroll()">

                                        <!-- Card 1: Jackets -->
                                        <div
                                            class="promo-card relative bg-[#EFF6FF] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-blue-50 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">30%
                                                    OFF</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Modern
                                                    <br>Jackets
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Water
                                                        Resistant
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Thermal Lining
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 0) { %>
                                                    <img src="/images/uploads/<%= products[0].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } %>
                                            </div>
                                        </div>

                                        <!-- Card 2: Dresses -->
                                        <div
                                            class="promo-card relative bg-[#FDF4F0] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-orange-50 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">15%
                                                    OFF</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Summer
                                                    <br>Dresses
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> 100% Organic
                                                        Cotton
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Breathable
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 1) { %>
                                                    <img src="/images/uploads/<%= products[1].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } %>
                                            </div>
                                        </div>

                                        <!-- Card 3: Sneakers -->
                                        <div
                                            class="promo-card relative bg-[#F0FDF4] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-green-50 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">NEW
                                                    IN</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Urban
                                                    <br>Sneakers
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Cushion Tech
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Anti-Slip Sole
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 2) { %>
                                                    <img src="/images/uploads/<%= products[2].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } %>
                                            </div>
                                        </div>

                                        <!-- Card 4: Watches (New) -->
                                        <div
                                            class="promo-card relative bg-[#F3F4F6] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-gray-100 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">EXCLUSIVE</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Luxury
                                                    <br>Watches
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Swiss Movement
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Sapphire
                                                        Crystal
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 3) { %>
                                                    <img src="/images/uploads/<%= products[3].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } else if (products && products.length> 0) { %>
                                                        <img src="/images/uploads/<%= products[0].image %>"
                                                            class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                        <% } %>
                                            </div>
                                        </div>

                                        <!-- Card 5: Bags (New) -->
                                        <div
                                            class="promo-card relative bg-[#FFF7ED] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-orange-100 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">TRAVEL</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Leather
                                                    <br>Bags
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Genuine
                                                        Leather
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Handcrafted
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 4) { %>
                                                    <img src="/images/uploads/<%= products[4].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } else if (products && products.length> 0) { %>
                                                        <img src="/images/uploads/<%= products[0].image %>"
                                                            class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                        <% } %>
                                            </div>
                                        </div>

                                        <!-- Card 6: Eyewear (New) -->
                                        <div
                                            class="promo-card relative bg-[#FEFCE8] rounded-[2rem] p-8 flex flex-col justify-between overflow-hidden border border-yellow-100 h-[28rem]">
                                            <div class="z-10 relative">
                                                <span
                                                    class="text-[#B88E2F] text-xs font-bold tracking-widest mb-3 block">SUMMER</span>
                                                <h3 class="text-4xl font-black text-darkText mb-3 leading-tight">
                                                    Designer
                                                    <br>Eyewear
                                                </h3>
                                                <ul class="mb-6 space-y-1">
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> UV Protection
                                                    </li>
                                                    <li
                                                        class="flex items-center text-zinc-500 text-[10px] font-bold uppercase tracking-wide">
                                                        <i class="ri-check-line mr-1 text-[#B88E2F]"></i> Polarized Lens
                                                    </li>
                                                </ul>
                                                <button
                                                    class="px-6 py-3 bg-[#B88E2F] text-white text-xs font-bold uppercase tracking-wider hover:bg-darkText transition-colors rounded-full shadow-lg shadow-[#B88E2F]/20 w-fit">Buy
                                                    Now</button>
                                            </div>
                                            <div class="absolute right-0 bottom-0 flex justify-end">
                                                <% if (products && products.length> 5) { %>
                                                    <img src="/images/uploads/<%= products[5].image %>"
                                                        class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                    <% } else if (products && products.length> 0) { %>
                                                        <img src="/images/uploads/<%= products[0].image %>"
                                                            class="relative w-56 h-56 object-contain drop-shadow-xl transition-transform duration-500">
                                                        <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                        (function () {
                                            const slider = document.getElementById('promo-slider');
                                            let scrollAmount = 0;
                                            let scrollSpeed = 0.8; // Lower is smoother/slower

                                            function scroll() {
                                                if (slider) {
                                                    slider.scrollLeft += scrollSpeed;
                                                    // Infinite scroll reset effect (optional, here we rewind)
                                                    if (slider.scrollLeft >= (slider.scrollWidth - slider.clientWidth - 5)) {
                                                        // Smooth rewind or jump? Let's smooth rewind
                                                        slider.scrollTo({ left: 0, behavior: 'smooth' });
                                                    }
                                                }
                                                requestAnimationFrame(scroll);
                                            }

                                            // Start
                                            requestAnimationFrame(scroll);
                                        })();
                                    </script>
                                </div>

                                <!-- Todays For You Section -->
                                <div class="w-full mb-6">
                                    <div class="flex flex-col items-center justify-center mb-8 gap-6">
                                        <h2 class="text-3xl font-bold text-darkText text-center">Todays For You!</h2>
                                        <div class="flex flex-wrap gap-2 justify-center">
                                            <button
                                                class="px-4 py-2 bg-darkText text-white text-xs font-semibold rounded-lg shadow-md hover:bg-darkText transition-colors">Best
                                                Seller</button>
                                            <button
                                                class="px-4 py-2 bg-white border border-zinc-200 text-zinc-600 text-xs font-semibold rounded-lg hover:bg-zinc-50 transition-colors">Keep
                                                Stylish</button>
                                            <button
                                                class="px-4 py-2 bg-white border border-zinc-200 text-zinc-600 text-xs font-semibold rounded-lg hover:bg-zinc-50 transition-colors">Special
                                                Discount</button>
                                            <button
                                                class="px-4 py-2 bg-white border border-zinc-200 text-zinc-600 text-xs font-semibold rounded-lg hover:bg-zinc-50 transition-colors">Official
                                                Store</button>
                                            <button
                                                class="px-4 py-2 bg-white border border-zinc-200 text-zinc-600 text-xs font-semibold rounded-lg hover:bg-zinc-50 transition-colors">Coveted
                                                Product</button>
                                        </div>
                                    </div>

                                    <div class="flex overflow-x-auto gap-6 scroll-smooth snap-x scrollbar-hide pb-8">
                                        <% var todaysItems=(typeof todaysForYouProducts !=='undefined' &&
                                            todaysForYouProducts && todaysForYouProducts.length> 0)
                                            ? todaysForYouProducts
                                            : safeProducts.filter(function(p) { return !p.flashSale; }).slice(0, 4);
                                            todaysItems.forEach(function(item) {
                                            %>
                                            <div class="group relative min-w-[260px] md:min-w-[280px] snap-start">
                                                <!-- Card Container -->
                                                <div
                                                    class="bg-white rounded-2xl overflow-hidden shadow-[0_2px_10px_rgba(0,0,0,0.04)] group-hover:shadow-[0_15px_30px_rgba(0,0,0,0.08)] transition-all duration-500 border border-zinc-100/50">

                                                    <!-- Image -->
                                                    <div
                                                        class="h-64 bg-[#F8F9FA] relative flex items-center justify-center overflow-hidden">
                                                        <img src="/images/uploads/<%= item.image %>"
                                                            class="w-4/5 h-4/5 object-contain mix-blend-multiply group-hover:scale-110 transition-transform duration-700 ease-[cubic-bezier(0.25,0.8,0.25,1)]">

                                                        <% let isWishlisted=(typeof user !=='undefined' && user &&
                                                            user.wishlist) ? user.wishlist.indexOf(item._id) !==-1 :
                                                            false; %>
                                                            <a href="javascript:void(0)"
                                                                onclick="addToWishlist(event, '<%= item._id %>')"
                                                                class="absolute top-3 right-3 w-9 h-9 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center <%= isWishlisted ? 'text-[#DB4444]' : 'text-zinc-400 hover:text-[#DB4444]' %> shadow-sm transition-all z-10 hover:scale-110">
                                                                <i
                                                                    class="<%= isWishlisted ? 'ri-heart-fill' : 'ri-heart-line' %> text-lg"></i>
                                                            </a>
                                                    </div>

                                                    <!-- Content -->
                                                    <div class="p-4">
                                                        <div class="flex justify-between items-start mb-1">
                                                            <h3
                                                                class="font-serif text-base text-darkText leading-snug truncate pr-4 group-hover:text-[#DB4444] transition-colors">
                                                                <%= item.name %>
                                                            </h3>
                                                            <p
                                                                class="text-[10px] text-zinc-500 font-medium uppercase tracking-wide">
                                                                <%= item.brand || 'Unknown' %>
                                                            </p>
                                                        </div>

                                                        <!-- Rating -->
                                                        <div
                                                            class="flex items-center gap-1 text-yellow-500 text-[10px] mb-3">
                                                            <i class="ri-star-fill"></i><i class="ri-star-fill"></i><i
                                                                class="ri-star-fill"></i><i class="ri-star-fill"></i><i
                                                                class="ri-star-fill"></i>
                                                            <span class="text-zinc-400 font-medium ml-1">(4.8)</span>
                                                        </div>

                                                        <!-- Price and Action -->
                                                        <div
                                                            class="flex items-center justify-between pt-3 border-t border-zinc-50">
                                                            <div class="flex flex-col">
                                                                <% if(item.discount> 0) { %>
                                                                    <span
                                                                        class="text-[10px] text-zinc-400 line-through">₹
                                                                        <%= item.price %>
                                                                    </span>
                                                                    <span class="text-sm font-bold text-darkText">₹<%=
                                                                            item.price - item.discount %></span>
                                                                    <% } else { %>
                                                                        <span class="text-sm font-bold text-darkText">₹
                                                                            <%= item.price %>
                                                                        </span>
                                                                        <% } %>
                                                            </div>
                                                            <a href="javascript:void(0)"
                                                                onclick="addToCart(event, '<%= item._id %>')"
                                                                class="w-9 h-9 rounded-lg border border-zinc-200 flex items-center justify-center hover:bg-darkText hover:text-white hover:border-darkText transition-all">
                                                                <i class="ri-add-line text-lg"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <% }) %>
                                    </div>
                                </div>

                                <!-- Scrolling Gallery Section (Dynamic) -->
                                <% if (typeof owner !=='undefined' ) { %>
                                    <div id="new-arrivals"
                                        class="w-full mb-6 py-6 bg-[#FFFBF7] rounded-2xl -mx-4 px-4 sm:mx-0 sm:px-8 border border-[#FBEAD2]/20 shadow-sm relative overflow-hidden">
                                        <!-- Background Decoration -->
                                        <div
                                            class="absolute top-0 right-0 w-64 h-64 bg-[#FBEAD2] rounded-full blur-[100px] opacity-40 -z-10">
                                        </div>
                                        <div
                                            class="absolute bottom-0 left-0 w-64 h-64 bg-zinc-100 rounded-full blur-[100px] opacity-30 -z-10">
                                        </div>

                                        <div
                                            class="flex items-center justify-center w-full max-w-6xl mx-auto mb-12 relative z-10 px-4 gap-4 md:gap-8">

                                            <!-- Left Decorative Element -->
                                            <div
                                                class="hidden md:flex flex-1 items-center justify-end gap-3 opacity-40">
                                                <div
                                                    class="h-[1px] w-full bg-gradient-to-r from-transparent to-[#18181B]">
                                                </div>
                                                <i class="ri-vip-diamond-line text-[#18181B] text-xl"></i>
                                            </div>

                                            <div
                                                class="flex flex-col items-center justify-center text-center shrink-0 max-w-lg">
                                                <h2
                                                    class="text-3xl md:text-4xl font-serif text-[#18181B] tracking-tight mb-4">
                                                    Dive
                                                    Into Elegant <br /> <span class="italic">Fashion Collections</span>
                                                </h2>
                                                <p class="text-zinc-500 text-sm md:text-base mb-6 leading-relaxed">
                                                    Explore our curated wardrobe essentials, designed to elevate your
                                                    personal style with elegance and comfort.
                                                </p>
                                                <div class="w-16 h-1 bg-[#18181B] rounded-full opacity-20"></div>
                                            </div>

                                            <!-- Right Decorative Element -->
                                            <div
                                                class="hidden md:flex flex-1 items-center justify-start gap-3 opacity-40">
                                                <i class="ri-vip-diamond-line text-[#18181B] text-xl"></i>
                                                <div
                                                    class="h-[1px] w-full bg-gradient-to-l from-transparent to-[#18181B]">
                                                </div>
                                            </div>

                                        </div>

                                        <div class="relative w-full overflow-hidden">
                                            <!-- Gradient Masks for Fade Effect -->
                                            <div
                                                class="absolute left-0 top-0 bottom-0 w-24 bg-gradient-to-r from-[#FFFBF7] to-transparent z-20">
                                            </div>
                                            <div
                                                class="absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-[#FFFBF7] to-transparent z-20">
                                            </div>

                                            <!-- Scrolling Track -->
                                            <div class="flex gap-6 animate-scroll w-max hover:pause-scroll">
                                                <!-- Logic: Normalized Gallery Objects -->
                                                <% var galleryItems=[]; if (typeof owner !=='undefined' && owner &&
                                                    owner.galleryImages && owner.galleryImages.length> 0) {
                                                    // Transform Owner Images into Objects with Mock Data
                                                    galleryItems = owner.galleryImages.map(function(img) {
                                                    return {
                                                    image: img,
                                                    name: "Specialty Dish",
                                                    rating: 5,
                                                    feature: "Chef's Choice"
                                                    };
                                                    });
                                                    } else if (safeProducts.length > 0) {
                                                    // Transform Product Placeholders
                                                    galleryItems = safeProducts.slice(0, 5).map(function(p) {
                                                    return {
                                                    _id: p._id,
                                                    image: p.image,
                                                    name: p.name,
                                                    brand: p.brand,
                                                    rating: 4.8,
                                                    feature: "Best Seller"
                                                    };
                                                    });
                                                    }
                                                    %>

                                                    <!-- Duplicate the gallery 3 times to ensure infinite seamless loop -->
                                                    <% for(let i=0; i<3; i++) { %>
                                                        <% galleryItems.forEach(function(item){ %>
                                                            <div
                                                                class="flex-shrink-0 w-40 md:w-56 bg-white rounded-xl overflow-hidden shadow-lg border border-zinc-100 transform hover:-translate-y-2 hover:rotate-1 hover:shadow-2xl transition-all duration-300 group relative z-10 w-full">

                                                                <!-- Image -->
                                                                <div
                                                                    class="h-32 md:h-40 w-full overflow-hidden bg-zinc-50 flex items-center justify-center relative">
                                                                    <img src="/images/uploads/<%= item.image %>"
                                                                        class="w-full h-full object-contain p-4 group-hover:scale-125 transition-transform duration-500 z-10 ease-out">

                                                                    <!-- Decorative blob behind image -->
                                                                    <div
                                                                        class="absolute inset-0 bg-[#1B3C29]/5 scale-0 group-hover:scale-100 rounded-full transition-transform duration-500 delay-100">
                                                                    </div>
                                                                </div>
                                                                <!-- Details -->
                                                                <div class="p-4 bg-white relative z-20">
                                                                    <div
                                                                        class="flex items-center gap-1 text-yellow-500 text-xs mb-2">
                                                                        <% for(let k=0; k<5; k++) { %>
                                                                            <i
                                                                                class="<%= k < Math.floor(item.rating) ? 'ri-star-fill' : 'ri-star-line' %>"></i>
                                                                            <% } %>
                                                                                <span
                                                                                    class="text-zinc-400 text-[10px] ml-1 font-medium">(
                                                                                    <%= item.rating %>)
                                                                                </span>
                                                                    </div>
                                                                    <h3
                                                                        class="font-serif font-bold text-darkText text-sm leading-tight mb-2 truncate group-hover:text-[#1B3C29] transition-colors">
                                                                        <%= item.name %>
                                                                    </h3>
                                                                    <p
                                                                        class="text-[10px] text-zinc-500 font-medium uppercase tracking-wide mb-2">
                                                                        <%= item.brand || 'Unknown' %>
                                                                    </p>
                                                                    <div class="flex items-center justify-between mt-2">
                                                                        <p
                                                                            class="text-[10px] font-bold tracking-wider uppercase text-green-700 bg-green-50 inline-block px-2 py-1 rounded-md">
                                                                            <%= item.feature %>
                                                                        </p>
                                                                        <a href="javascript:void(0)"
                                                                            onclick="addToCart(event, '<%= item._id %>')"
                                                                            class="w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-400 group-hover:bg-[#1B3C29] group-hover:text-white transition-all z-30 cursor-pointer">
                                                                            <i class="ri-add-line"></i>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <% }) %>
                                                                <% } %>
                                            </div>
                                        </div>

                                        <style>
                                            @keyframes scroll {
                                                0% {
                                                    transform: translateX(0);
                                                }

                                                100% {
                                                    transform: translateX(-33.33%);
                                                }
                                            }

                                            .animate-scroll {
                                                animation: scroll 30s linear infinite;
                                            }

                                            .hover\:pause-scroll:hover {
                                                animation-play-state: paused;
                                            }
                                        </style>
                                    </div>
                                    <% } %>

                                        <!-- Promotional Banner Slider -->
                                        <div
                                            class="w-full mb-6 relative group overflow-hidden bg-[#F5F5F7] rounded-2xl">
                                            <div id="promo-slider" class="relative min-h-[500px] flex items-center">
                                                <!-- Slide 1 -->
                                                <div
                                                    class="promo-slide absolute inset-0 w-full h-full flex flex-col md:flex-row items-center justify-center p-8 md:p-20 opacity-100 transition-opacity duration-700 pointer-events-auto">
                                                    <div class="md:w-1/2 space-y-6 z-10 text-center md:text-left">
                                                        <h2
                                                            class="text-4xl md:text-6xl font-black text-darkText tracking-tight leading-[1.1]">
                                                            FASHION <br> FOR MEN
                                                        </h2>
                                                        <p
                                                            class="text-zinc-500 text-sm md:text-base leading-relaxed max-w-md mx-auto md:mx-0">
                                                            That this group would somehow form a family that's the way
                                                            we
                                                            all became the Brady Bunch. Love exciting and new. Come
                                                            aboard
                                                            were expecting you.
                                                        </p>
                                                        <button
                                                            class="px-8 py-3 bg-transparent border-2 border-darkText text-darkText text-sm font-bold tracking-widest uppercase hover:bg-darkText hover:text-white transition-all duration-300">
                                                            Shop Now
                                                        </button>
                                                    </div>
                                                    <div
                                                        class="md:w-1/2 h-full relative mt-8 md:mt-0 flex items-center justify-center">
                                                        <!-- Mock Image Composition -->
                                                        <div class="relative w-full max-w-md aspect-square">
                                                            <% if (products && products.length> 0) { %>
                                                                <img src="/images/uploads/<%= products[0].image %>"
                                                                    class="w-full h-full object-contain mix-blend-multiply drop-shadow-2xl hover:scale-105 transition-transform duration-700">
                                                                <% } else { %>
                                                                    <div
                                                                        class="w-full h-full bg-zinc-200 rounded-lg flex items-center justify-center">
                                                                        Coming Soon</div>
                                                                    <% } %>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Slide 2 -->
                                                <div
                                                    class="promo-slide absolute inset-0 w-full h-full flex flex-col md:flex-row items-center justify-center p-8 md:p-20 opacity-0 transition-opacity duration-700 pointer-events-none">
                                                    <div class="md:w-1/2 space-y-6 z-10 text-center md:text-left">
                                                        <h2
                                                            class="text-4xl md:text-6xl font-black text-darkText tracking-tight leading-[1.1]">
                                                            SUMMER <br> ESSENTIALS
                                                        </h2>
                                                        <p
                                                            class="text-zinc-500 text-sm md:text-base leading-relaxed max-w-md mx-auto md:mx-0">
                                                            Discover the finest collection of summer wears designed for
                                                            comfort and style. Elevate your wardrobe today.
                                                        </p>
                                                        <button
                                                            class="px-8 py-3 bg-transparent border-2 border-darkText text-darkText text-sm font-bold tracking-widest uppercase hover:bg-darkText hover:text-white transition-all duration-300">
                                                            Explore
                                                        </button>
                                                    </div>
                                                    <div
                                                        class="md:w-1/2 h-full relative mt-8 md:mt-0 flex items-center justify-center">
                                                        <div class="relative w-full max-w-md aspect-square">
                                                            <% if (products && products.length> 1) { %>
                                                                <img src="/images/uploads/<%= products[1].image %>"
                                                                    class="w-full h-full object-contain mix-blend-multiply drop-shadow-2xl hover:scale-105 transition-transform duration-700">
                                                                <% } else if (products && products.length> 0) { %>
                                                                    <img src="/images/uploads/<%= products[0].image %>"
                                                                        class="w-full h-full object-contain mix-blend-multiply drop-shadow-2xl">
                                                                    <% } %>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Slide 3 -->
                                                <div
                                                    class="promo-slide absolute inset-0 w-full h-full flex flex-col md:flex-row items-center justify-center p-8 md:p-20 opacity-0 transition-opacity duration-700 pointer-events-none">
                                                    <div class="md:w-1/2 space-y-6 z-10 text-center md:text-left">
                                                        <h2
                                                            class="text-4xl md:text-6xl font-black text-darkText tracking-tight leading-[1.1]">
                                                            WINTER <br> COLLECTION
                                                        </h2>
                                                        <p
                                                            class="text-zinc-500 text-sm md:text-base leading-relaxed max-w-md mx-auto md:mx-0">
                                                            Stay warm and stylish with our exclusive range of premium
                                                            winter
                                                            apparel. Crafted for comfort.
                                                        </p>
                                                        <button
                                                            class="px-8 py-3 bg-transparent border-2 border-darkText text-darkText text-sm font-bold tracking-widest uppercase hover:bg-darkText hover:text-white transition-all duration-300">
                                                            Shop Winter
                                                        </button>
                                                    </div>
                                                    <div
                                                        class="md:w-1/2 h-full relative mt-8 md:mt-0 flex items-center justify-center">
                                                        <div class="relative w-full max-w-md aspect-square">
                                                            <% if (products && products.length> 2) { %>
                                                                <img src="/images/uploads/<%= products[2].image %>"
                                                                    class="w-full h-full object-contain mix-blend-multiply drop-shadow-2xl hover:scale-105 transition-transform duration-700">
                                                                <% } else if (products && products.length> 0) { %>
                                                                    <img src="/images/uploads/<%= products[0].image %>"
                                                                        class="w-full h-full object-contain mix-blend-multiply drop-shadow-2xl">
                                                                    <% } %>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Controls -->
                                            <button id="promo-prev"
                                                class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-white/80 backdrop-blur-sm border border-zinc-200 text-darkText hover:bg-white hover:shadow-md transition-all z-20 rounded-full">
                                                <i class="ri-arrow-left-line text-xl"></i>
                                            </button>
                                            <button id="promo-next"
                                                class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-white/80 backdrop-blur-sm border border-zinc-200 text-darkText hover:bg-white hover:shadow-md transition-all z-20 rounded-full">
                                                <i class="ri-arrow-right-line text-xl"></i>
                                            </button>

                                            <!-- Dots -->
                                            <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-20">
                                                <button
                                                    class="promo-dot w-3 h-3 bg-darkText rounded-full transition-all hover:scale-110"></button>
                                                <button
                                                    class="promo-dot w-3 h-3 bg-zinc-300 rounded-full transition-all hover:scale-110"></button>
                                                <button
                                                    class="promo-dot w-3 h-3 bg-zinc-300 rounded-full transition-all hover:scale-110"></button>
                                            </div>
                                        </div>

                                        <!-- Similar Items You Might Like Section -->
                                        <div class="w-full mb-6 relative z-10">
                                            <h2 class="text-xl font-bold text-darkText mb-4">Similar Items You Might
                                                Like
                                            </h2>
                                            <div class="flex overflow-x-auto gap-6 snap-x scrollbar-hide pb-8">
                                                <% var similarItems=(typeof similarItemsProducts !=='undefined' &&
                                                    similarItemsProducts && similarItemsProducts.length> 0)
                                                    ? similarItemsProducts
                                                    : safeProducts.filter(function(p) { return !p.flashSale; });
                                                    similarItems.forEach(function(item, index) {
                                                    %>
                                                    <div
                                                        class="group relative min-w-[260px] md:min-w-[280px] snap-start">
                                                        <!-- Card Container -->
                                                        <div
                                                            class="bg-white rounded-2xl overflow-hidden shadow-[0_2px_10px_rgba(0,0,0,0.04)] group-hover:shadow-[0_15px_30px_rgba(0,0,0,0.08)] transition-all duration-500 border border-zinc-100/50">

                                                            <!-- Image -->
                                                            <div
                                                                class="h-64 bg-[#F8F9FA] relative flex items-center justify-center overflow-hidden">
                                                                <img src="/images/uploads/<%= item.image %>"
                                                                    class="w-4/5 h-4/5 object-contain mix-blend-multiply group-hover:scale-110 transition-transform duration-700 ease-[cubic-bezier(0.25,0.8,0.25,1)]">

                                                                <% let isWishlisted=(typeof user !=='undefined' && user
                                                                    && user.wishlist) ? user.wishlist.indexOf(item._id)
                                                                    !==-1 : false; %>
                                                                    <a href="javascript:void(0)"
                                                                        onclick="addToWishlist(event, '<%= item._id %>')"
                                                                        class="absolute top-3 right-3 w-9 h-9 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center <%= isWishlisted ? 'text-[#DB4444]' : 'text-zinc-400 hover:text-[#DB4444]' %> shadow-sm transition-all z-10 hover:scale-110">
                                                                        <i
                                                                            class="<%= isWishlisted ? 'ri-heart-fill' : 'ri-heart-line' %> text-lg"></i>
                                                                    </a>
                                                            </div>

                                                            <!-- Content -->
                                                            <div class="p-4">
                                                                <div class="flex justify-between items-start mb-1">
                                                                    <h3
                                                                        class="font-serif text-base text-darkText leading-snug truncate pr-4 group-hover:text-[#DB4444] transition-colors">
                                                                        <%= item.name %>
                                                                    </h3>
                                                                    <p
                                                                        class="text-[10px] text-zinc-500 font-medium uppercase tracking-wide">
                                                                        <%= item.brand || 'Unknown' %>
                                                                    </p>
                                                                </div>

                                                                <!-- Rating -->
                                                                <div
                                                                    class="flex items-center gap-1 text-yellow-500 text-[10px] mb-3">
                                                                    <i class="ri-star-fill"></i><i
                                                                        class="ri-star-fill"></i><i
                                                                        class="ri-star-fill"></i><i
                                                                        class="ri-star-fill"></i><i
                                                                        class="ri-star-fill"></i>
                                                                    <span
                                                                        class="text-zinc-400 font-medium ml-1">(4.8)</span>
                                                                </div>

                                                                <!-- Price and Action -->
                                                                <div
                                                                    class="flex items-center justify-between pt-3 border-t border-zinc-50">
                                                                    <div class="flex flex-col">
                                                                        <% if(item.discount> 0) { %>
                                                                            <span
                                                                                class="text-[10px] text-zinc-400 line-through">₹
                                                                                <%= item.price %>
                                                                            </span>
                                                                            <span
                                                                                class="text-sm font-bold text-darkText">₹
                                                                                <%= item.price - item.discount %>
                                                                            </span>
                                                                            <% } else { %>
                                                                                <span
                                                                                    class="text-sm font-bold text-darkText">₹
                                                                                    <%= item.price %>
                                                                                </span>
                                                                                <% } %>
                                                                    </div>
                                                                    <a href="javascript:void(0)"
                                                                        onclick="addToCart(event, '<%= item._id %>')"
                                                                        class="w-9 h-9 rounded-lg border border-zinc-200 flex items-center justify-center hover:bg-darkText hover:text-white hover:border-darkText transition-all">
                                                                        <i class="ri-add-line text-lg"></i>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <% }) %>
                                            </div>

                                            <!-- View More Button -->
                                        </div>

                                        <!-- Service Features Section (Marquee) -->
                                        <style>
                                            @keyframes marquee {
                                                0% {
                                                    transform: translateX(0);
                                                }

                                                100% {
                                                    transform: translateX(-50%);
                                                }
                                            }

                                            .animate-marquee {
                                                animation: marquee 30s linear infinite;
                                            }

                                            .animate-marquee:hover {
                                                animation-play-state: paused;
                                            }

                                            @keyframes shine {
                                                100% {
                                                    transform: translateX(100%);
                                                }
                                            }

                                            .animate-shine {
                                                animation: shine 0.75s cubic-bezier(0.4, 0, 0.2, 1);
                                            }
                                        </style>
                                        <div class="w-full mb-6 mt-6 overflow-hidden relative">
                                            <!-- Gradient Masks for smooth fade -->
                                            <div
                                                class="absolute left-0 top-0 bottom-0 w-20 bg-gradient-to-r from-white to-transparent z-10">
                                            </div>
                                            <div
                                                class="absolute right-0 top-0 bottom-0 w-20 bg-gradient-to-l from-white to-transparent z-10">
                                            </div>

                                            <div
                                                class="bg-white rounded-[2rem] border border-zinc-100 p-4 shadow-xl shadow-zinc-100/50 flex">
                                                <div
                                                    class="flex items-center gap-8 animate-marquee whitespace-nowrap min-w-full">
                                                    <!-- Original Features -->
                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-truck-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Free Delivery
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">Free
                                                                shipping on all order</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-exchange-dollar-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Money Return
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">Back
                                                                guarantee under 7 days</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-customer-service-2-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Online Support
                                                                24/7
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">
                                                                Support
                                                                online 24 hours a day</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-shield-check-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Reliable</h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">
                                                                Trusted
                                                                by 1000+ brands</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-secure-payment-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Secure Payment
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">100%
                                                                secure payment</p>
                                                        </div>
                                                    </div>

                                                    <!-- Duplicates for Infinite Loop -->
                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-truck-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Free Delivery
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">Free
                                                                shipping on all order</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-exchange-dollar-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Money Return
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">Back
                                                                guarantee under 7 days</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-customer-service-2-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Online Support
                                                                24/7
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">
                                                                Support
                                                                online 24 hours a day</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-shield-check-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Reliable</h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">
                                                                Trusted
                                                                by 1000+ brands</p>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex items-center gap-3 group cursor-default p-3 rounded-2xl hover:bg-zinc-50 transition-colors border border-transparent hover:border-zinc-100 min-w-[250px]">
                                                        <div
                                                            class="w-12 h-12 rounded-full bg-[#FFF7ED] text-[#B88E2F] flex items-center justify-center text-xl group-hover:bg-[#B88E2F] group-hover:text-white transition-colors duration-300 shadow-sm flex-shrink-0">
                                                            <i class="ri-secure-payment-line"></i>
                                                        </div>
                                                        <div>
                                                            <h4 class="font-bold text-darkText text-sm">Secure Payment
                                                            </h4>
                                                            <p class="text-zinc-500 text-[10px] mt-0.5 font-medium">100%
                                                                secure payment</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                </div>
            </div>

            <!-- About Us Teaser Section (Redesigned) -->
            <div class="w-full bg-white border-t border-zinc-100">
                <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center">
                    <!-- Left: Content -->
                    <div class="w-full md:w-1/2 py-20 px-5 md:pr-16 text-left">
                        <h2 class="text-4xl md:text-6xl font-bold text-darkText mb-6 tracking-tight leading-none">
                            Redefining <span class="italic font-serif font-light text-zinc-400">Fashion</span> for
                            the
                            <br> Modern Soul
                        </h2>
                        <p class="text-zinc-500 max-w-lg mb-10 text-lg leading-relaxed">
                            We believe in quality, sustainability, and the power of simplicity. Discover the story
                            behind Scatch and our mission to change the industry.
                        </p>

                        <!-- Rating & Avatars -->
                        <div class="flex items-center gap-6 mb-12">
                            <div class="flex -space-x-4">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=100&auto=format&fit=crop"
                                    class="w-12 h-12 rounded-full border-[3px] border-white object-cover shadow-sm"
                                    alt="User">
                                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=100&auto=format&fit=crop"
                                    class="w-12 h-12 rounded-full border-[3px] border-white object-cover shadow-sm"
                                    alt="User">
                                <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=100&auto=format&fit=crop"
                                    class="w-12 h-12 rounded-full border-[3px] border-white object-cover shadow-sm"
                                    alt="User">
                                <div
                                    class="w-12 h-12 rounded-full border-[3px] border-white bg-darkText flex items-center justify-center text-xs font-bold text-white shadow-sm">
                                    +2k</div>
                            </div>
                            <div class="flex flex-col items-start border-l border-zinc-200 pl-6">
                                <div class="flex text-yellow-500 text-base mb-1">
                                    <i class="ri-star-fill"></i>
                                    <i class="ri-star-fill"></i>
                                    <i class="ri-star-fill"></i>
                                    <i class="ri-star-fill"></i>
                                    <i class="ri-star-fill"></i>
                                </div>
                                <span class="text-sm text-zinc-500 font-medium">From 2,000+ happy customers</span>
                            </div>
                        </div>

                        <a href="/about"
                            class="group inline-flex items-center gap-2 px-8 py-4 bg-darkText text-white rounded-full font-bold text-sm hover:bg-darkText transition-all shadow-xl shadow-zinc-200">
                            Read More About Us
                            <i class="ri-arrow-right-line group-hover:translate-x-1 transition-transform"></i>
                        </a>
                    </div>

                    <!-- Right: Image to fill space -->
                    <!-- Right: Image to fill space (Advanced 3D Hover Effect) -->
                    <div
                        class="w-full md:w-1/2 h-[500px] md:h-[600px] relative flex items-center justify-center p-4 md:p-8 group">

                        <!-- Back Decorative Layer (Opposite Rotation) -->
                        <div
                            class="absolute inset-8 md:inset-12 bg-[#1B3C29]/5 rounded-[2rem] transform rotate-6 scale-95 transition-all duration-700 ease-out group-hover:rotate-2 group-hover:scale-100 border border-[#1B3C29]/10">
                        </div>

                        <!-- Main Image Container -->
                        <div
                            class="relative w-full h-full rounded-[2rem] overflow-hidden shadow-2xl transform -rotate-2 transition-all duration-700 ease-out group-hover:rotate-0 group-hover:scale-[1.02] group-hover:shadow-[0_20px_50px_rgba(27,60,41,0.15)] bg-white">
                            <img src="https://images.unsplash.com/photo-1532453288672-3a27e9be9efd?q=80&w=1964&auto=format&fit=crop"
                                class="w-full h-full object-cover transform scale-105 transition-transform duration-1000 group-hover:scale-100"
                                alt="Fashion Lifestyle">

                            <!-- Premium Shine Effect -->
                            <div
                                class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/30 to-transparent -translate-x-full group-hover:animate-shine z-10 transition-none">
                            </div>

                            <!-- Inner Border -->
                            <div
                                class="absolute inset-0 border border-white/20 rounded-[2rem] pointer-events-none z-20">
                            </div>
                        </div>

                        <!-- Floating Badge -->
                        <div
                            class="absolute bottom-16 -left-4 md:left-0 bg-white shadow-xl px-6 py-3 rounded-full transform translate-y-8 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 delay-100 z-30 border border-zinc-100">
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 rounded-full bg-[#1B3C29] animate-pulse"></div>
                                <span class="text-[#1B3C29] font-serif font-italic tracking-wide">Premium
                                    Collection</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                function toggleFilter() {
                    const sidebar = document.getElementById('filter-sidebar');
                    const isMobile = window.innerWidth < 768;

                    if (sidebar.classList.contains('hidden')) {
                        sidebar.classList.remove('hidden');
                        if (isMobile) {
                            sidebar.classList.add('fixed', 'inset-0', 'z-50', 'bg-white', 'p-6', 'overflow-y-auto', 'animate-fade-in');
                        }
                    } else {
                        sidebar.classList.add('hidden');
                        sidebar.classList.remove('fixed', 'inset-0', 'z-50', 'bg-white', 'p-6', 'overflow-y-auto', 'animate-fade-in');
                    }
                }

                // Navigation Scripts
                const flashContainer = document.getElementById('flash-sale-container');
                const prevBtn = document.getElementById('flash-prev');
                const nextBtn = document.getElementById('flash-next');

                if (flashContainer && prevBtn && nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        flashContainer.scrollBy({ left: 300, behavior: 'smooth' });
                    });

                    prevBtn.addEventListener('click', () => {
                        flashContainer.scrollBy({ left: -300, behavior: 'smooth' });
                    });
                }

                // Auto-dismiss Flash Message
                const flashMsg = document.getElementById('flash-message');
                if (flashMsg) {
                    setTimeout(() => {
                        flashMsg.style.transition = "opacity 0.5s ease";
                        flashMsg.style.opacity = "0";
                        setTimeout(() => flashMsg.remove(), 500);
                    }, 3000);
                }

                // Promo Slider Logic
                const slides = document.querySelectorAll('.promo-slide');
                const dots = document.querySelectorAll('.promo-dot');
                const prevPromo = document.getElementById('promo-prev');
                const nextPromo = document.getElementById('promo-next');
                let currentSlide = 0;
                let slideInterval;

                function showSlide(index) {
                    slides.forEach((slide, i) => {
                        if (i === index) {
                            slide.classList.remove('opacity-0', 'pointer-events-none');
                            slide.classList.add('opacity-100', 'pointer-events-auto');
                            dots[i].classList.remove('bg-zinc-300');
                            dots[i].classList.add('bg-darkText', 'scale-110');
                        } else {
                            slide.classList.remove('opacity-100', 'pointer-events-auto');
                            slide.classList.add('opacity-0', 'pointer-events-none');
                            dots[i].classList.remove('bg-darkText', 'scale-110');
                            dots[i].classList.add('bg-zinc-300');
                        }
                    });
                    currentSlide = index;
                }

                function nextSlide() {
                    let next = (currentSlide + 1) % slides.length;
                    showSlide(next);
                }

                function prevSlide() {
                    let prev = (currentSlide - 1 + slides.length) % slides.length;
                    showSlide(prev);
                }

                if (slides.length > 0) {
                    // Init
                    showSlide(0);

                    // Event Listeners
                    nextPromo.addEventListener('click', () => {
                        nextSlide();
                        resetInterval();
                    });

                    prevPromo.addEventListener('click', () => {
                        prevSlide();
                        resetInterval();
                    });

                    dots.forEach((dot, index) => {
                        dot.addEventListener('click', () => {
                            showSlide(index);
                            resetInterval();
                        });
                    });

                    // Auto Play
                    function startInterval() {
                        slideInterval = setInterval(nextSlide, 5000);
                    }

                    function resetInterval() {
                        clearInterval(slideInterval);
                        startInterval();
                    }

                    startInterval();
                }

                // View More functionality

            </script>
            <style>
                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateY(10px);
                    }

                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .animate-fade-in {
                    animation: fadeIn 0.5s ease forwards;
                }
            </style>

            <div id="toast-container"
                class="fixed top-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-3 pointer-events-none">
            </div>

            <script>
                function showToast(message, type = 'success') {
                    const container = document.getElementById('toast-container');
                    const toast = document.createElement('div');

                    // Design matching screenshot: White rounded-[2rem] pill shape, subtle soft shadow
                    const baseClass = "pointer-events-auto flex items-center justify-between gap-4 pl-3 pr-4 py-3 bg-white rounded-[2rem] shadow-2xl shadow-zinc-200/50 border border-zinc-100 transform transition-all duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] -translate-y-24 opacity-0 min-w-[340px] max-w-sm";

                    toast.className = baseClass;

                    // Icon logic - Circular green background with white check
                    const icon = type === 'success'
                        ? `<div class="w-10 h-10 rounded-full bg-emerald-500 flex items-center justify-center text-white flex-shrink-0 shadow-sm"><i class="ri-check-line text-xl font-bold"></i></div>`
                        : `<div class="w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white flex-shrink-0 shadow-sm"><i class="ri-error-warning-line text-xl font-bold"></i></div>`;

                    // Text Colors matching "Summer Dresses" card (darkText / zinc-500)
                    const titleText = type === 'success' ? 'Success' : 'Error';

                    toast.innerHTML = `
                        <div class="flex items-center gap-3.5">
                            ${icon}
                            <div class="flex flex-col">
                                <span class="font-bold text-darkText text-[15px] leading-tight tracking-tight">${titleText}</span>
                                <span class="font-medium text-zinc-500 text-[13px] leading-tight">${message}</span>
                            </div>
                        </div>
                        <button onclick="this.parentElement.remove()" class="text-zinc-400 hover:text-zinc-600 transition-colors p-1">
                            <i class="ri-close-line text-lg"></i>
                        </button>
                    `;

                    container.appendChild(toast);

                    // Animate in (Smooth drop down)
                    requestAnimationFrame(() => {
                        toast.classList.remove('-translate-y-24', 'opacity-0');
                        toast.classList.add('translate-y-0', 'opacity-100');
                    });

                    // Remove after 4 seconds
                    setTimeout(() => {
                        if (toast.parentElement) {
                            toast.classList.remove('translate-y-0', 'opacity-100');
                            toast.classList.add('-translate-y-24', 'opacity-0');
                            setTimeout(() => toast.remove(), 500);
                        }
                    }, 4000);
                }

                async function addToCart(event, id) {
                    event.preventDefault(); // Stop default navigation
                    event.stopPropagation();

                    try {
                        const button = event.currentTarget;

                        const response = await fetch(`/addtocart/${id}`, {
                            method: 'GET',
                            headers: { 'Accept': 'application/json', 'X-Requested-With': 'XMLHttpRequest' }
                        });

                        const data = await response.json();

                        if (data.success) {
                            showToast(data.message);

                            // Update cart count in header
                            const cartCountEl = document.getElementById('cart-count-badge');
                            if (cartCountEl) {
                                cartCountEl.innerText = data.cartCount;
                                if (data.cartCount > 0) {
                                    cartCountEl.style.display = 'flex';
                                } else {
                                    cartCountEl.style.display = 'none';
                                }
                            }
                        } else {
                            showToast('Failed to update cart', 'error');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        // Fallback
                        window.location.href = `/addtocart/${id}`;
                    }
                }

                async function addToWishlist(event, id) {
                    event.preventDefault();
                    event.stopPropagation();

                    try {
                        const button = event.currentTarget;
                        const icon = button.querySelector('i');

                        const response = await fetch(`/addtowishlist/${id}`, {
                            method: 'GET',
                            headers: { 'Accept': 'application/json', 'X-Requested-With': 'XMLHttpRequest' }
                        });

                        const data = await response.json();

                        if (data.success) {
                            showToast(data.message);

                            // Update wishlist count in header
                            const wishlistCountEl = document.getElementById('wishlist-count-badge');
                            if (wishlistCountEl) {
                                wishlistCountEl.innerText = data.wishlistCount;
                                if (data.wishlistCount > 0) {
                                    wishlistCountEl.style.display = 'flex';
                                } else {
                                    wishlistCountEl.style.display = 'none';
                                }
                            }

                            // Toggle UI
                            if (data.action === 'added') {
                                if (icon) {
                                    icon.classList.remove('ri-heart-line');
                                    icon.classList.add('ri-heart-fill');
                                }
                                button.classList.add('text-red-500', 'border-[#DB4444]', 'text-[#DB4444]');
                                button.classList.remove('text-zinc-300', 'text-zinc-400');
                            } else {
                                if (icon) {
                                    icon.classList.remove('ri-heart-fill');
                                    icon.classList.add('ri-heart-line');
                                }
                                button.classList.remove('text-red-500', 'border-[#DB4444]', 'text-[#DB4444]');
                                button.classList.add('text-zinc-300');
                            }
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        window.location.href = `/addtowishlist/${id}`;
                    }
                }
            </script>
            <%- include('./partials/footer') %>